<h2 id='enroll'>Enroll</h2>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://www.smartinventory/api/area/enroll'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'content_type: application/json'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: {{bearer_token}}'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "session_token" : "{{session_token}}"
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">myHeaders</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">();</span>
<span class="nx">myHeaders</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">content_type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">myHeaders</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">{{bearer_token}}</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">raw</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="dl">"</span><span class="s2">session_token</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">{{session_token}}</span><span class="dl">"</span><span class="p">});</span>

<span class="kd">var</span> <span class="nx">requestOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">myHeaders</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">raw</span><span class="p">,</span>
  <span class="na">redirect</span><span class="p">:</span> <span class="dl">'</span><span class="s1">follow</span><span class="dl">'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://www.smartinventory/api/area/enroll</span><span class="dl">"</span><span class="p">,</span> <span class="nx">requestOptions</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">OkHttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OkHttpClient</span><span class="o">().</span><span class="na">newBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">MediaType</span> <span class="n">mediaType</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">);</span>
<span class="nc">RequestBody</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">RequestBody</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">mediaType</span><span class="o">,</span> <span class="s">"{\n\t\"session_token\" : \"{{session_token}}\"\n}"</span><span class="o">);</span>
<span class="nc">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Request</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">url</span><span class="o">(</span><span class="s">"https://www.smartinventory/api/area/enroll"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">"POST"</span><span class="o">,</span> <span class="n">body</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"content_type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"{{bearer_token}}"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">newCall</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="kd">import</span> <span class="kt">Foundation</span>
<span class="cp">#if canImport(FoundationNetworking)</span>
<span class="kd">import</span> <span class="kt">FoundationNetworking</span>
<span class="cp">#endif</span>

<span class="k">var</span> <span class="nv">semaphore</span> <span class="o">=</span> <span class="kt">DispatchSemaphore</span> <span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">parameters</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\n\t\"</span><span class="s">session_token</span><span class="se">\"</span><span class="s"> : </span><span class="se">\"</span><span class="s">{{session_token}}</span><span class="se">\"\n</span><span class="s">}"</span>
<span class="k">let</span> <span class="nv">postData</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span>

<span class="k">var</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">URLRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://www.smartinventory/api/area/enroll"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span><span class="nv">timeoutInterval</span><span class="p">:</span> <span class="kt">Double</span><span class="o">.</span><span class="n">infinity</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="nf">addValue</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="nv">forHTTPHeaderField</span><span class="p">:</span> <span class="s">"content_type"</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="nf">addValue</span><span class="p">(</span><span class="s">"{{bearer_token}}"</span><span class="p">,</span> <span class="nv">forHTTPHeaderField</span><span class="p">:</span> <span class="s">"Authorization"</span><span class="p">)</span>

<span class="n">request</span><span class="o">.</span><span class="n">httpMethod</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">request</span><span class="o">.</span><span class="n">httpBody</span> <span class="o">=</span> <span class="n">postData</span>

<span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="kt">URLSession</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">dataTask</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">request</span><span class="p">)</span> <span class="p">{</span> <span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span> 
  <span class="k">guard</span> <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">data</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">error</span><span class="p">))</span>
    <span class="n">semaphore</span><span class="o">.</span><span class="nf">signal</span><span class="p">()</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="nf">print</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
  <span class="n">semaphore</span><span class="o">.</span><span class="nf">signal</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">task</span><span class="o">.</span><span class="nf">resume</span><span class="p">()</span>
<span class="n">semaphore</span><span class="o">.</span><span class="nf">wait</span><span class="p">()</span>

</code></pre></div>

<blockquote>
<p>Request Body (JSON):</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"session_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"w551UBuls9RmFbtISz6uw551UBuls9RmFbtISz6u"</span><span class="p">,</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"device_details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"device_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Online"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_activated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-04T14:13:05.2627022J"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MBA-PROD-LSR-001.ATR1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Laser Barcode Scanner"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_actions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read_2D_barcode"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"device_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_activated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-01T24:57:16.3723921T"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MBA-PROD-RFID-002.ATR3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RFID Scanner"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_actions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read_RFID_tags"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"device_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Offline"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"printer_state"</span><span class="p">:</span><span class="w"> 
      </span><span class="nl">"is_activated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-01I44:13:02.3668319Z1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MBA-PROD-DTP-003.ATR4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Direct Thermal Printer"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"device_actions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"print_product_label
    }
  ],
}
</span></code></pre></div>

<!-- enroll to the location (enrolls a peripheral to a location) which reserves it to the session token?
Then unenroll to release all peripherals reserved by session token? -->

<p>Enroll to the area encoded in your session token. The only required action is to include it in the request body.
It is decoded and checked during the enroll call.</p>

<!-- This returns the last known status of the logical type Scanner with the capability to read barcodes. -->
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST area/enroll</code></p>
<h3 id='request-body'>Request Body</h3>
<table><thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>O/M</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>session_token</td>
<td>string</td>
<td>Mandatory</td>
<td>One-time token used to establish a session for a user and is revoked when the token expires. It contains the location at which the session token will be used.</td>
</tr>
</tbody></table>

<!-- Webhook | string | Optional | Fill in this field to receive messages via the webhook. No service bus information will be returned.
WebhookSecurity<br>Token | string | Optional | See above. -->

<aside class="success">
A successful request returns a status of 200 OK and the body of the response will contain the device details for the enrolled area.
<!-- Add link here. The JSON response is the only thing not included here, 
so maybe you do not need a link to the conceptual guide-->

</aside>
<h3 id='response'>Response</h3>
<p>The response returns the <code>device_details</code> object that lists the devices at the specified location and their details
such as their state, if they are activated, their type, and actions available to each device.</p>

<table><thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>O/M</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_details</td>
<td>array[object]</td>
<td>Mandatory</td>
<td>List of devices at the specified area and their details.</td>
</tr>
<tr>
<td>device_state</td>
<td>string</td>
<td>Mandatory</td>
<td>The overall state of the device, either: <code>Online</code>, <code>Offline</code>, or <code>Error</code>.</td>
</tr>
<tr>
<td>is_activated</td>
<td>bool</td>
<td>Mandatory</td>
<td>If yes, then the device has been activated by your application. If no, it is not activated.</td>
</tr>
<tr>
<td>device_ID</td>
<td>string</td>
<td>Mandatory</td>
<td>The network ID used to identify the device on the network.</td>
</tr>
<tr>
<td>device_type</td>
<td>string</td>
<td>Mandatory</td>
<td>The type of device, either <code>Laser barcode scanner</code>, <code>RFID Scanner</code>, or <code>Direct Thermal Printer</code>.</td>
</tr>
<tr>
<td>device_actions</td>
<td>array[object]</td>
<td>Mandatory</td>
<td>The actions available to the device at the location. Either <code>read_2D_barcode</code>, <code>read_RFID_tag</code>, or <code>print_product_label</code>.</td>
</tr>
</tbody></table>

<aside class="warning">
An unsuccessful request may return either a 400, 401, 409, 422 error code with an explanatory message. For the general meaning of these responses, see the Error Codes section of this document.
</aside>
